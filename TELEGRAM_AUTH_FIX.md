# ะัะฟัะฐะฒะปะตะฝะธะต ะฐะฒัะพัะธะทะฐัะธะธ ัะตัะตะท Telegram ะธ UI ัะปัััะตะฝะธั

## ๐ฏ ะงัะพ ะฑัะปะพ ะธัะฟัะฐะฒะปะตะฝะพ

### 1. โ Telegram ะฐะฒัะพัะธะทะฐัะธั

#### ะัะพะฑะปะตะผะฐ
- ะกะตัะฒะธั ะฑัะป ะฝะตะดะพัััะฟะตะฝ, ะพัะธะฑะบะฐ "Bot domain invalid" ะธะท-ะทะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั Telegram Login Widget
- ะะธะดะถะตั ััะตะฑัะตั ะฝะฐัััะพะนะบะธ domain ั ะฑะพัะฐ ัะตัะตะท BotFather
- ะะต ะฒะฟะธััะฒะฐะปัั ะฒ ะฐััะธัะตะบัััั ะฟะปะฐััะพัะผั (ะธัะฟะพะปัะทัะตััั Telegram WebApp)

#### ะะตัะตะฝะธะต
- **ะฃะดะฐะปัะฝ ะบะพะผะฟะพะฝะตะฝั `TelegramLoginButton`** ั ะฒะฝะตัะฝะธะผ ะฒะธะดะถะตัะพะผ
- **ะะตะฐะปะธะทะพะฒะฐะฝะฐ ะฒะฝัััะตะฝะฝัั ะฐะฒัะพัะธะทะฐัะธั ัะตัะตะท Telegram WebApp**:
  - ะะฝะพะฟะบะฐ Telegram ะฝะฐ ัััะฐะฝะธัะต ะฒัะพะดะฐ ะฟัะพะฒะตััะตั `window.Telegram.WebApp.initDataUnsafe.user`
  - ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒะฝัััะธ Telegram โ ะธะทะฒะปะตะบะฐะตััั `telegramId`
  - ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะะ ะฟะพ `telegramId` ัะตัะตะท `/api/users?telegramId=...`
  - ะะฒัะพัะธะทะฐัะธั ัะตัะตะท NextAuth ะฟัะพะฒะฐะนะดะตั `'telegram'`

#### ะะพะณะธะบะฐ ัะฐะฑะพัั

```typescript
// 1. ะัะพะฒะตัะบะฐ Telegram WebApp
const tgUser = window.Telegram?.WebApp?.initDataUnsafe?.user

// 2. ะัะปะธ ะฝะต ะฝะฐะนะดะตะฝ โ ะฟะพะบะฐะทัะฒะฐะตะผ ะพัะธะฑะบั (ัะฐะฑะพัะฐะตั ัะพะปัะบะพ ะฒ Telegram)
if (!tgUser?.id) {
  setError('ะะฒัะพัะธะทะฐัะธั ะดะพัััะฟะฝะฐ ัะพะปัะบะพ ะฒะฝัััะธ Telegram ะฟัะธะปะพะถะตะฝะธั')
  return
}

// 3. ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพ telegramId
const response = await fetch(`/api/users?telegramId=${tgUser.id}`)
const data = await response.json()

// 4. ะัะพะฒะตัะบะธ
if (!data.user) โ "Telegram ะฝะต ะฟัะธะฒัะทะฐะฝ, ะทะฐัะตะณะธัััะธััะนัะตัั"
if (data.user.isBlocked) โ "ะะบะบะฐัะฝั ะทะฐะฑะปะพะบะธัะพะฒะฐะฝ"
if (!data.user.isVerified) โ ะะตะดะธัะตะบั ะฝะฐ /auth/verify

// 5. ะะฒัะพัะธะทะฐัะธั ัะตัะตะท NextAuth
await signIn('telegram', {
  redirect: false,
  id: tgUser.id.toString(),
  username: tgUser.username,
})

// 6. ะะตะดะธัะตะบั ะฝะฐ dashboard
```

#### ะะพะฑะฐะฒะปะตะฝะพ ัะฐััะธัะตะฝะฝะพะต ะปะพะณะณะธัะพะฒะฐะฝะธะต

ะัะต ัะฐะณะธ ะฐะฒัะพัะธะทะฐัะธะธ ัะตัะตะท Telegram ะปะพะณะธัััััั ะฒ ะบะพะฝัะพะปั ั ะฟัะตัะธะบัะพะผ `[TELEGRAM SIGNIN]`:

```javascript
[TELEGRAM SIGNIN] ะะฐัะฐะปะพ ะฒัะพะดะฐ ัะตัะตะท Telegram
[TELEGRAM SIGNIN] ะัะพะฒะตัะบะฐ Telegram WebApp: {...}
[TELEGRAM SIGNIN] ะะฐะนะดะตะฝ Telegram ะฟะพะปัะทะพะฒะฐัะตะปั: {...}
[TELEGRAM SIGNIN] ะะฐะฟัะพั ะบ API ะดะปั ะฟะพะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั...
[TELEGRAM SIGNIN] ะัะฒะตั ะพั API: {...}
[TELEGRAM SIGNIN] ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะนะดะตะฝ: {...}
[TELEGRAM SIGNIN] ะะพะฟััะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ ัะตัะตะท NextAuth...
[TELEGRAM SIGNIN] ะะตะทัะปััะฐั NextAuth: {...}
[TELEGRAM SIGNIN] ะฃัะฟะตัะฝะฐั ะฐะฒัะพัะธะทะฐัะธั, ัะตะดะธัะตะบั...
```

ะญัะพ ะฟะพะทะฒะพะปัะตั ะปะตะณะบะพ ะพัะปะฐะถะธะฒะฐัั ะฟัะพะฑะปะตะผั ั ะฐะฒัะพัะธะทะฐัะธะตะน.

#### ะะดะต ัะฐะฑะพัะฐะตั

โ **ะะฝัััะธ Telegram ะฟัะธะปะพะถะตะฝะธั** (Telegram WebApp / Mini App):
- ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฑะพัะฐ โ WebApp โ ัััะฐะฝะธัะฐ ะฒัะพะดะฐ
- ะะฝะพะฟะบะฐ Telegram ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฝะฐัะพะดะธั `telegramId`
- ะะฒัะพัะธะทะฐัะธั ะฟัะพะธััะพะดะธั ะฐะฒัะพะผะฐัะธัะตัะบะธ (ะตัะปะธ ะฐะบะบะฐัะฝั ะฟัะธะฒัะทะฐะฝ)

โ **ะ ะพะฑััะฝะพะผ ะฑัะฐัะทะตัะต**:
- `window.Telegram.WebApp` ะฝะตะดะพัััะฟะตะฝ
- ะะพะบะฐะทัะฒะฐะตััั ะพัะธะฑะบะฐ: "ะะฒัะพัะธะทะฐัะธั ะดะพัััะฟะฝะฐ ัะพะปัะบะพ ะฒะฝัััะธ Telegram ะฟัะธะปะพะถะตะฝะธั"
- ะะพะปัะทะพะฒะฐัะตะปั ะผะพะถะตั ะฒะพะนัะธ ัะตัะตะท ัะพัะผั (ัะตะปะตัะพะฝ + ะฟะฐัะพะปั)

---

### 2. โ ะะฝะพะฟะบะฐ ัะดะฐะปะตะฝะธั ะทะฐะดะฐะฝะธั

#### ะัะพะฑะปะตะผะฐ
- ะะฝะพะฟะบะฐ ะทะฐะฝะธะผะฐะปะฐ ะฒัั ัะธัะธะฝั (`w-full`)
- ะะฐัะฟะพะปะฐะณะฐะปะฐัั ะฒะฝะธะทั ะบะฐััะพัะบะธ
- ะัะณะปัะดะตะปะฐ ะณัะพะผะพะทะดะบะพ

#### ะะตัะตะฝะธะต
- **ะะฐะปะตะฝัะบะฐั ะธะบะพะฝะบะฐ ะบะพัะทะธะฝั** (16x16 px)
- **ะะฐัะฟะพะปะพะถะตะฝะฐ ัะฟัะฐะฒะฐ ะฒะฒะตััั** ะบะฐััะพัะบะธ (`absolute top-4 right-4`)
- **ะัะฐัะธะฒัะน hover ัััะตะบั**:
  - ะคะพะฝ: `bg-red-500/10 โ hover:bg-red-500/20`
  - ะะพัะดะตั: `border-red-500/20 โ hover:border-red-500/40`
  - ะฆะฒะตั ะธะบะพะฝะบะธ: `text-red-500 โ hover:text-red-400`
- **Tooltip**: `title="ะฃะดะฐะปะธัั ะทะฐะดะฐะฝะธะต"`

#### ะะพะด

```tsx
{showDeleteButton && onDelete && (
  <button 
    onClick={() => onDelete(order.id)}
    className="absolute top-4 right-4 p-1.5 rounded-md bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/40 transition-colors group z-10"
    title="ะฃะดะฐะปะธัั ะทะฐะดะฐะฝะธะต"
  >
    <svg className="w-4 h-4 text-red-500 group-hover:text-red-400">
      {/* ะะบะพะฝะบะฐ ะบะพัะทะธะฝั */}
    </svg>
  </button>
)}
```

#### ะะดะต ะฟัะธะผะตะฝัะตััั

- `src/components/business/OrderCard.tsx`
- ะัะฟะพะปัะทัะตััั ะฝะฐ ัััะฐะฝะธัะต `dashboard/customer` ะดะปั ัะดะฐะปะตะฝะธั ะทะฐะดะฐะฝะธะน ะทะฐะบะฐะทัะธะบะพะผ

---

### 3. โ ะะฒะตัะปะตะน ัะฒะตะดะพะผะปะตะฝะธะน

#### ะัะพะฑะปะตะผะฐ
- ะะฒะตัะปะตะน ะฑัะป ัะปะธัะบะพะผ ะฑะพะปััะธะผ (`mt-20`)
- ะะฐัะฟะพะปะฐะณะฐะปัั ั ะพััััะฟะพะผ ัะฒะตััั
- ะะฐะฝะธะผะฐะป ะฒะตัั ัะบัะฐะฝ (`inset-0`)
- ะะปะพัะฐั ะฒะธะดะธะผะพััั ะฝะฐ ะผะพะฑะธะปัะฝัั ััััะพะนััะฒะฐั

#### ะะตัะตะฝะธะต
- **ะคะธะบัะธัะพะฒะฐะฝะฝะฐั ะฟะพะทะธัะธั ัะฒะตััั**: `fixed top-4`
- **ะฆะตะฝััะธัะพะฒะฐะฝะธะต**: `left-0 right-0 flex justify-center`
- **ะะพะผะฟะฐะบัะฝัะน ัะฐะทะผะตั**: `max-w-md w-full`
- **ะะบะพะฝะบะธ ััะฐัััะฐ**:
  - โ ะฃัะฟะตั: ะทะตะปัะฝะฐั ะณะฐะปะพัะบะฐ
  - โ ะัะธะฑะบะฐ: ะบัะฐัะฝัะน ะฒะพัะบะปะธัะฐัะตะปัะฝัะน ะทะฝะฐะบ
- **ะะปะฐะฒะฝะฐั ะฐะฝะธะผะฐัะธั**: `animate-in slide-in-from-top duration-300`
- **ะฏัะบะธะต ัะฒะตัะฐ**:
  - ะฃัะฟะตั: `border-emerald-500/60 bg-emerald-500/20 text-emerald-100`
  - ะัะธะฑะบะฐ: `border-red-500/60 bg-red-500/20 text-red-100`

#### ะะพะด

```tsx
{deleteMessage && (
  <div className="fixed top-4 left-0 right-0 z-50 flex justify-center px-4 pointer-events-none">
    <div className={`pointer-events-auto rounded-lg px-6 py-3 shadow-2xl border text-sm max-w-md w-full flex items-center gap-3 animate-in slide-in-from-top duration-300 ${...}`}>
      {deleteMessage.type === 'success' ? (
        <svg className="w-5 h-5 text-emerald-400">...</svg>
      ) : (
        <svg className="w-5 h-5 text-red-400">...</svg>
      )}
      <p className="flex-1">{deleteMessage.text}</p>
    </div>
  </div>
)}
```

#### ะะดะต ะฟัะธะผะตะฝัะตััั

- `src/app/dashboard/customer/page.tsx`
- ะะพะบะฐะทัะฒะฐะตััั ะฟัะธ ัะดะฐะปะตะฝะธะธ ะทะฐะดะฐะฝะธั (ััะฟะตั/ะพัะธะฑะบะฐ)
- ะะฒัะพะผะฐัะธัะตัะบะธ ัะบััะฒะฐะตััั ัะตัะตะท 3-5 ัะตะบัะฝะด

---

## ๐ ะะทะผะตะฝะตะฝะฝัะต ัะฐะนะปั

1. **`src/app/auth/signin/page.tsx`**
   - ะฃะดะฐะปัะฝ ะธะผะฟะพัั `TelegramLoginButton`
   - ะะพะฑะฐะฒะปะตะฝะฐ ััะฝะบัะธั `handleTelegramLogin` ั ะฟะพะปะฝะพะน ะปะพะณะธะบะพะน
   - ะะพะฑะฐะฒะปะตะฝะพ ัะฐััะธัะตะฝะฝะพะต ะปะพะณะณะธัะพะฒะฐะฝะธะต
   - ะฃะปัััะตะฝั ัะพะพะฑัะตะฝะธั ะพะฑ ะพัะธะฑะบะฐั

2. **`src/lib/auth.ts`**
   - Telegram provider ัะถะต ะฑัะป ะฟัะฐะฒะธะปัะฝะพ ะฝะฐัััะพะตะฝ
   - ะะฐะฑะพัะฐะตั ั `telegramId` ะธะท credentials

3. **`src/components/business/OrderCard.tsx`**
   - ะะฝะพะฟะบะฐ ัะดะฐะปะตะฝะธั ะฟะตัะตะผะตัะตะฝะฐ ะฒ ะฟัะฐะฒัะน ะฒะตััะฝะธะน ัะณะพะป
   - ะะทะผะตะฝะตะฝ ะดะธะทะฐะนะฝ ะฝะฐ ะผะฐะปะตะฝัะบัั ะธะบะพะฝะบั
   - ะะพะฑะฐะฒะปะตะฝ tooltip

4. **`src/app/dashboard/customer/page.tsx`**
   - ะะฒะตัะปะตะน ะฟะตัะตะผะตััะฝ ะฒ ัะพะฟ ัะบัะฐะฝะฐ
   - ะะพะฑะฐะฒะปะตะฝั ะธะบะพะฝะบะธ ััะฐัััะฐ
   - ะฃะปัััะตะฝะฐ ะฐะฝะธะผะฐัะธั ะธ ัะฒะตัะฐ

5. **ะฃะดะฐะปัะฝ**: `src/components/auth/TelegramLoginButton.tsx`
   - ะะพะปััะต ะฝะต ะธัะฟะพะปัะทัะตััั
   - ะะฐะผะตะฝัะฝ ะฝะฐ ะฒัััะพะตะฝะฝัั ะปะพะณะธะบั ะฒ signin page

---

## ๐ ะะฐะบ ะธัะฟะพะปัะทะพะฒะฐัั

### ะะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน

1. **ะะฑััะฝัะน ะฒัะพะด** (ะฑัะฐัะทะตั):
   - ะัะบัััั `/auth/signin`
   - ะะฒะตััะธ ัะตะปะตัะพะฝ + ะฟะฐัะพะปั
   - ะะฐะถะฐัั "ะะพะนัะธ"

2. **ะัะพะด ัะตัะตะท Telegram** (ะฒะฝัััะธ Telegram):
   - ะัะบัััั ะฑะพัะฐ โ ะฟะตัะตะนัะธ ะฒ WebApp
   - ะะฐ ัััะฐะฝะธัะต ะฒัะพะดะฐ ะฝะฐะถะฐัั ะบะฝะพะฟะบั "Telegram"
   - ะะฒัะพะผะฐัะธัะตัะบะฐั ะฐะฒัะพัะธะทะฐัะธั (ะตัะปะธ Telegram ะฟัะธะฒัะทะฐะฝ)

3. **ะะตะณะธัััะฐัะธั**:
   - ะะฐัะตะณะธัััะธัะพะฒะฐัััั ัะตัะตะท ัะพัะผั
   - ะัะพะนัะธ ะฒะตัะธัะธะบะฐัะธั ัะตัะตะท Telegram ะฑะพัะฐ
   - ะะพัะปะต ััะพะณะพ ะผะพะถะฝะพ ะฒัะพะดะธัั ัะตัะตะท Telegram

### ะะปั ัะฐะทัะฐะฑะพััะธะบะพะฒ

**ะัะพะฒะตัะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ Telegram ะฒ ะปะพะณะฐั:**

```bash
# ะัะบัััั ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)
# ะัะธ ะฝะฐะถะฐัะธะธ ะฝะฐ ะบะฝะพะฟะบั Telegram ะฒั ัะฒะธะดะธัะต:

[TELEGRAM SIGNIN] ะะฐัะฐะปะพ ะฒัะพะดะฐ ัะตัะตะท Telegram
[TELEGRAM SIGNIN] ะัะพะฒะตัะบะฐ Telegram WebApp: {
  hasTelegram: true,
  hasWebApp: true,
  hasUser: true
}
[TELEGRAM SIGNIN] ะะฐะนะดะตะฝ Telegram ะฟะพะปัะทะพะฒะฐัะตะปั: { id: 123456789, username: "user" }
[TELEGRAM SIGNIN] ะะฐะฟัะพั ะบ API ะดะปั ะฟะพะธัะบะฐ ะฟะพะปัะทะพะฒะฐัะตะปั...
[TELEGRAM SIGNIN] ะัะฒะตั ะพั API: { success: true, hasUser: true }
[TELEGRAM SIGNIN] ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะนะดะตะฝ: { id: "...", role: "EXECUTOR", isBlocked: false, isVerified: true }
[TELEGRAM SIGNIN] ะะพะฟััะบะฐ ะฐะฒัะพัะธะทะฐัะธะธ ัะตัะตะท NextAuth...
[TELEGRAM SIGNIN] ะะตะทัะปััะฐั NextAuth: { ok: true, error: null }
[TELEGRAM SIGNIN] ะฃัะฟะตัะฝะฐั ะฐะฒัะพัะธะทะฐัะธั, ัะตะดะธัะตะบั...
```

**ะขะธะฟะธัะฝัะต ะพัะธะฑะบะธ:**

1. **"ะะฒัะพัะธะทะฐัะธั ะดะพัััะฟะฝะฐ ัะพะปัะบะพ ะฒะฝัััะธ Telegram ะฟัะธะปะพะถะตะฝะธั"**
   - ะัะธัะธะฝะฐ: ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะป ัััะฐะฝะธัั ะฒ ะพะฑััะฝะพะผ ะฑัะฐัะทะตัะต
   - ะะตัะตะฝะธะต: ะัะฟะพะปัะทะพะฒะฐัั ะพะฑััะฝัะน ะฒัะพะด (ัะตะปะตัะพะฝ + ะฟะฐัะพะปั)

2. **"Telegram ะฐะบะบะฐัะฝั ะฝะต ะฟัะธะฒัะทะฐะฝ"**
   - ะัะธัะธะฝะฐ: ะ ะะ ะฝะตั ะฟะพะปัะทะพะฒะฐัะตะปั ั ัะฐะบะธะผ `telegramId`
   - ะะตัะตะฝะธะต: ะัะพะนัะธ ัะตะณะธัััะฐัะธั ะธ ะฒะตัะธัะธะบะฐัะธั ัะตัะตะท ะฑะพัะฐ

3. **"ะะพะปัะทะพะฒะฐัะตะปั ะฝะต ะฒะตัะธัะธัะธัะพะฒะฐะฝ"**
   - ะัะธัะธะฝะฐ: `isVerified = false`
   - ะะตัะตะฝะธะต: ะะฐะฒะตััะธัั ะฒะตัะธัะธะบะฐัะธั ะฒ Telegram ะฑะพัะต

---

## ๐ ะะธะฐะณะฝะพััะธะบะฐ ะฟัะพะฑะปะตะผ

### ะัะพะฑะปะตะผะฐ: ะะฝะพะฟะบะฐ Telegram ะฝะต ัะฐะฑะพัะฐะตั

**ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ:**
```bash
# ะะพะปะถะฝั ะฑััั ะปะพะณะธ ั [TELEGRAM SIGNIN]
```

**ะัะพะฒะตัััะต ะฟะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั:**
```bash
# ะะฐ ัะตัะฒะตัะต ะดะพะปะถะฝั ะฑััั:
TELEGRAM_BOT_TOKEN="..."
NEXTAUTH_SECRET="..."
NEXTAUTH_URL="http://..."
```

**ะัะพะฒะตัััะต ะะ:**
```sql
-- ะััั ะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะธ ั telegramId?
SELECT id, name, telegramId, isVerified FROM users WHERE telegramId IS NOT NULL;
```

### ะัะพะฑะปะตะผะฐ: "ะกะตัะฒะธั ะฝะตะดะพัััะฟะตะฝ"

**ะญัะพ ะฑะพะปััะต ะะ ะดะพะปะถะฝะพ ะฟัะพะธััะพะดะธัั**, ะฟะพัะพะผั ััะพ:
- ะฃะฑัะฐะฝ Telegram Login Widget (ััะตะฑะพะฒะฐะป ะฝะฐัััะพะนะบะธ domain)
- ะัะฟะพะปัะทัะตััั ัะพะปัะบะพ ะฒะฝัััะตะฝะฝัั ะปะพะณะธะบะฐ ัะตัะตะท WebApp

ะัะปะธ ะฒัั ัะฐะฒะฝะพ ะฒะธะดะธัะต ััั ะพัะธะฑะบั:
1. ะัะพะฒะตัััะต ะปะพะณะธ: `[TELEGRAM SIGNIN]` ะฒ ะบะพะฝัะพะปะธ
2. ะฃะฑะตะดะธัะตัั, ััะพ ัะดะฐะปัะฝ ัะฐะนะป `TelegramLoginButton.tsx`
3. ะะตัะตะทะฐะฟัััะธัะต ัะตัะฒะตั: `npm run build && npm start`

---

## โ ะงะตะบะปะธัั ะฟะพัะปะต ะดะตะฟะปะพั

- [ ] ะกััะฐะฝะธัะฐ `/auth/signin` ะพัะบััะฒะฐะตััั
- [ ] ะะฝะพะฟะบะฐ "Telegram" ะฒะธะดะฝะฐ (ััะดะพะผ ั Google)
- [ ] ะัะธ ะบะปะธะบะต ะฒ ะฑัะฐัะทะตัะต โ ะฟะพะบะฐะทัะฒะฐะตััั ะพัะธะฑะบะฐ "ะดะพัััะฟะฝะฐ ัะพะปัะบะพ ะฒ Telegram"
- [ ] ะัะธ ะบะปะธะบะต ะฒ Telegram WebApp โ ะฐะฒัะพัะธะทะฐัะธั ัะฐะฑะพัะฐะตั (ะตัะปะธ ะฐะบะบะฐัะฝั ะฟัะธะฒัะทะฐะฝ)
- [ ] ะะฝะพะฟะบะฐ ัะดะฐะปะตะฝะธั ะทะฐะดะฐะฝะธั โ ะผะฐะปะตะฝัะบะฐั, ัะฟัะฐะฒะฐ ะฒะฒะตััั
- [ ] ะัะธ ัะดะฐะปะตะฝะธะธ ะทะฐะดะฐะฝะธั โ ะพะฒะตัะปะตะน ะฟะพัะฒะปัะตััั ัะฒะตััั ั ะธะบะพะฝะบะพะน
- [ ] ะะฒะตัะปะตะน ะธััะตะทะฐะตั ัะตัะตะท 3 ัะตะบัะฝะดั
- [ ] ะ ะบะพะฝัะพะปะธ ะฒะธะดะฝั ะปะพะณะธ `[TELEGRAM SIGNIN]`

---

## ๐ ะะพะฟะพะปะฝะธัะตะปัะฝะฐั ะธะฝัะพัะผะฐัะธั

### ะััะธัะตะบัััะฐ Telegram ะฐะฒัะพัะธะทะฐัะธะธ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    Telegram WebApp                          โ
โ  (window.Telegram.WebApp.initDataUnsafe.user)              โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ telegramId
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              /api/users?telegramId=...                      โ
โ  ะะพะธัะบ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะะ ะฟะพ telegramId                     โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ user { id, role, isVerified, ... }
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ            signIn('telegram', { id, username })             โ
โ  NextAuth ะฟัะพะฒะฐะนะดะตั 'telegram' ะฒ lib/auth.ts               โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ JWT ัะตััะธั
                     โผ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   useSession()                              โ
โ  ะะพะปัะทะพะฒะฐัะตะปั ะฐะฒัะพัะธะทะพะฒะฐะฝ, ะดะพัััะฟ ะบ ะทะฐัะธััะฝะฝัะผ ัััะฐะฝะธัะฐะผ   โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

### ะกะฒัะทั ั ัะตะณะธัััะฐัะธะตะน

1. **ะะพะฒัะน ะฟะพะปัะทะพะฒะฐัะตะปั** โ `/auth/signup` โ ะฒัะฑะธัะฐะตั ัะพะปั
2. โ `/auth/signup/executor` ะธะปะธ `/auth/signup/customer`
3. ะะฐะฟะพะปะฝัะตั ัะพัะผั โ ัะพะทะดะฐัััั User (`isVerified: false`)
4. ะะพะบะฐะทัะฒะฐะตััั `TelegramVerification` ะบะพะผะฟะพะฝะตะฝั
5. ะะตัะตัะพะดะธั ะฟะพ deepLink ะฒ Telegram ะฑะพัะฐ
6. ะะพั ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต โ ะฒัะทัะฒะฐะตั `/api/verification/telegram/complete`
7. ะฃััะฐะฝะฐะฒะปะธะฒะฐะตััั `telegramId` ะธ `isVerified: true`
8. **ะขะตะฟะตัั ะผะพะถะฝะพ ะฒะพะนัะธ ัะตัะตะท ะบะฝะพะฟะบั Telegram**

---

ะัั ะณะพัะพะฒะพ! ๐

