# üî¨ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ê–ù–ê–õ–ò–ó –†–ï–®–ï–ù–ò–Ø

## ‚ùì –†–ï–®–ò–¢ –õ–ò –≠–¢–û –ü–†–û–ë–õ–ï–ú–£?

### ‚úÖ –î–ê! –í–û–¢ –ü–û–ß–ï–ú–£:

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê #1: "–ó–∞–ª–æ–≥–∏–Ω–µ–Ω –¥–∞–∂–µ –≤ –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ"

### –ü—Ä–∏—á–∏–Ω–∞:
```typescript
// src/app/dashboard/customer/page.tsx (–ë–´–õ–û):
export default function CustomerDashboardPage() {
  // –ù–ï–¢ –ü–†–û–í–ï–†–ö–ò –ê–í–¢–û–†–ò–ó–ê–¶–ò–ò!
  const response = await fetch('/api/orders?role=customer&userId=temp-customer')
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. –õ—é–±–æ–π –æ—Ç–∫—Ä—ã–≤–∞–ª `/dashboard/customer`
2. –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–∞–ª–∞—Å—å –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–µ—Å—Å–∏–∏
3. –ü–æ–∫–∞–∑—ã–≤–∞–ª–∏—Å—å –¥–∞–Ω–Ω—ã–µ `temp-customer`
4. –ü–æ—ç—Ç–æ–º—É **–í–°–ï** –≤–∏–¥–µ–ª–∏ –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```typescript
// –°–¢–ê–õ–û:
export default function CustomerDashboardPage() {
  const { data: session, status } = useSession({
    required: true,  // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–ê–Ø –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
    onUnauthenticated() {
      router.push('/auth/signin?role=customer')  // –†–µ–¥–∏—Ä–µ–∫—Ç –µ—Å–ª–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω
    },
  })
  
  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏
  if (session?.user?.role !== 'CUSTOMER') {
    router.push('/auth/signin')
  }
  
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –†–ï–ê–õ–¨–ù–´–ô userId –∏–∑ —Å–µ—Å—Å–∏–∏
  fetch(`/api/orders?role=customer&userId=${session.user.id}`)
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ `useSession({ required: true })` ‚Üí –µ—Å–ª–∏ –Ω–µ—Ç —Å–µ—Å—Å–∏–∏ = —Ä–µ–¥–∏—Ä–µ–∫—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ ‚Üí —Ç–æ–ª—å–∫–æ CUSTOMER –º–æ–∂–µ—Ç –≤–∏–¥–µ—Ç—å
- ‚úÖ `session.user.id` ‚Üí –∫–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç –°–í–û–ò –¥–∞–Ω–Ω—ã–µ
- ‚úÖ Middleware –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ‚Üí –¥–≤–æ–π–Ω–∞—è –∑–∞—â–∏—Ç–∞

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –í –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ –ë–ï–ó –ª–æ–≥–∏–Ω–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/auth/signin` ‚úÖ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê #2: "–ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–Ω–æ–ø–∫–∏ –í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"

### –ü—Ä–∏—á–∏–Ω–∞:
```typescript
// src/app/auth/signup/customer/page.tsx (–ë–´–õ–û):
const handleVerified = async () => {
  router.push('/dashboard/customer')  // –ü—Ä–æ—Å—Ç–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç –±–µ–∑ signIn()!
}
```

**–ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–æ:**
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏–ª Telegram –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—é
2. `isVerified = true` –≤ –ë–î
3. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
4. **–ù–û! NextAuth —Å–µ—Å—Å–∏—è –ù–ï —Å–æ–∑–¥–∞–Ω–∞!**
5. Dashboard –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–µ—Å—Å–∏—é ‚Üí –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–í—Ö–æ–¥/–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è"

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```typescript
// –°–¢–ê–õ–û:
const handleVerified = async () => {
  // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  const res = await fetch(`/api/users?userId=${userId}`)
  const data = await res.json()
  
  // 2. –ê–í–¢–û–õ–û–ì–ò–ù —á–µ—Ä–µ–∑ NextAuth
  const result = await signIn('credentials', {
    phone: data.user.phone,
    password: formData.password,
    redirect: false
  })
  
  // 3. –°–æ–∑–¥–∞–Ω–∞ JWT —Å–µ—Å—Å–∏—è –≤ NextAuth
  // 4. Cookie —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
  
  // 5. –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
  router.push('/dashboard/customer')
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ `signIn()` —Å–æ–∑–¥–∞—ë—Ç JWT —Ç–æ–∫–µ–Ω
- ‚úÖ JWT —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ cookie `next-auth.session-token`
- ‚úÖ Cookie –∂–∏–≤—ë—Ç 30 –¥–Ω–µ–π
- ‚úÖ –¢–µ–ø–µ—Ä—å `useSession()` –≤–∏–¥–∏—Ç –∑–∞–ª–æ–≥–∏–Ω–µ–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- ‚úÖ Header –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–Ω–æ–ø–∫–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Üí —Å—Ä–∞–∑—É –∑–∞–ª–æ–≥–∏–Ω–µ–Ω, –∫–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" –≤–º–µ—Å—Ç–æ "–í—Ö–æ–¥" ‚úÖ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê #3: "–°–µ—Å—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è"

### –ü—Ä–∏—á–∏–Ω–∞ #1: PrismaAdapter –∫–æ–Ω—Ñ–ª–∏–∫—Ç
```typescript
// src/lib/auth.ts (–ë–´–õ–û):
adapter: PrismaAdapter(prisma),
providers: [CredentialsProvider({ ... })]
```

**–ü–æ—á–µ–º—É –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- PrismaAdapter ‚Üí –¥–ª—è OAuth –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤ (Google, GitHub)
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Å—Å–∏–∏ –≤ —Ç–∞–±–ª–∏—Ü—É `Session` –≤ –ë–î
- CredentialsProvider ‚Üí –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT (–±–µ–∑ –ë–î)
- **–ö–û–ù–§–õ–ò–ö–¢:** Adapter –ø—ã—Ç–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å–∞—Ç—å –≤ –ë–î, JWT –≤ cookie
- –†–µ–∑—É–ª—å—Ç–∞—Ç: —Å–µ—Å—Å–∏—è –ª–æ–º–∞–µ—Ç—Å—è

### –ü—Ä–∏—á–∏–Ω–∞ #2: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π secure flag
```typescript
// –ë–´–õ–û:
secure: process.env.NODE_ENV === 'production'
```

**–ü—Ä–æ–±–ª–µ–º–∞:**
- –í –ø—Ä–æ–¥–∞–∫—à–Ω–µ `NODE_ENV=production`
- –°—Ç–∞–≤–∏—Ç—Å—è `secure=true` –¥–ª—è cookie
- –ù–æ —Å–∞–π—Ç –Ω–∞ **HTTP** (IP:3000), –Ω–µ HTTPS
- –ë—Ä–∞—É–∑–µ—Ä –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç secure cookies –ø–æ HTTP
- –†–µ–∑—É–ª—å—Ç–∞—Ç: cookie –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```typescript
// –°–¢–ê–õ–û:
// –ù–ï –ò–°–ü–û–õ–¨–ó–£–ï–ú Adapter
// adapter: undefined,

useSecureCookies: (process.env.NEXTAUTH_URL || '').startsWith('https://'),
// ^^ –î–ª—è http://109.69.58.185:3000 ‚Üí secure=false ‚úÖ

session: {
  strategy: 'jwt',
  maxAge: 30 * 24 * 60 * 60,  // 30 –¥–Ω–µ–π
  updateAge: 24 * 60 * 60,     // –û–±–Ω–æ–≤–ª—è—Ç—å –∫–∞–∂–¥—ã–µ 24 —á–∞—Å–∞
}
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ –ù–µ—Ç Adapter ‚Üí –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å JWT
- ‚úÖ `useSecureCookies` —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ NEXTAUTH_URL (http/https)
- ‚úÖ –ü–æ HTTP ‚Üí secure=false ‚Üí –±—Ä–∞—É–∑–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç cookie
- ‚úÖ `maxAge: 30 –¥–Ω–µ–π` ‚Üí –¥–æ–ª–≥–æ–∂–∏–≤—É—â–∞—è —Å–µ—Å—Å–∏—è
- ‚úÖ `updateAge: 24h` ‚Üí –∞–≤—Ç–æ–ø—Ä–æ–¥–ª–µ–Ω–∏–µ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** Cookie —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è, —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ ‚úÖ

---

## üéØ –ü–†–û–ë–õ–ï–ú–ê #4: "–ë–æ—Ç –ø—É—Ç–∞–µ—Ç –¥–∞/–Ω–µ—Ç"

### –ü—Ä–∏—á–∏–Ω–∞:
```typescript
// –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–≤–µ—á–∞–µ—Ç "–¥–∞" –Ω–∞ –≤–æ–ø—Ä–æ—Å "–¢—ã —Ä–µ–∞–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ–∫?"
// OpenAI –≤–∏–¥–∏—Ç "–¥–∞" ‚Üí daily: true (–æ—à–∏–±–∫–∞!)
```

**–ü—Ä–æ–±–ª–µ–º–∞:** OpenAI –Ω–µ —É—á–∏—Ç—ã–≤–∞–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤–æ–ø—Ä–æ—Å–∞

### ‚úÖ –†–µ—à–µ–Ω–∏–µ:
```typescript
// –°–¢–ê–õ–û:
const lastAiMessage = conversationHistory[conversationHistory.length - 1]?.content

// –ü—Ä–æ–º–ø—Ç OpenAI —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç:
`–ü–û–°–õ–ï–î–ù–ò–ô –í–û–ü–†–û–° –ë–û–¢–ê: "–¢—ã —Ä–µ–∞–ª—å–Ω—ã–π —á–µ–ª–æ–≤–µ–∫?"
–û–¢–í–ï–¢ –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø: "–¥–∞"

–ó–ê–î–ê–ß–ê: –ò–∑–≤–ª–µ–∫–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —É—á–∏—Ç—ã–≤–∞—è –ö–û–ù–¢–ï–ö–°–¢ –≤–æ–ø—Ä–æ—Å–∞.`

// + –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞:
const adjusted = applyContextualYesNo(userMessage, lastAiMessage, extracted)
// –ï—Å–ª–∏ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ "—Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å" + –æ—Ç–≤–µ—Ç "–¥–∞" ‚Üí real: "yes" (–Ω–µ daily!)
```

**–ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ OpenAI –≤–∏–¥–∏—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤–æ–ø—Ä–æ—Å–∞
- ‚úÖ –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É–µ—Ç –¥–≤—É—Å–º—ã—Å–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
- ‚úÖ "–¥–∞" –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å ‚Üí `real: "yes"`
- ‚úÖ "–¥–∞" –Ω–∞ –≤–æ–ø—Ä–æ—Å –ø—Ä–æ –∑–∞–¥–∞–Ω–∏—è ‚Üí `daily: true`

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ë–æ—Ç –Ω–µ –ø—É—Ç–∞–µ—Ç –ø–æ–ª—è ‚úÖ

---

## üìä –ò–¢–û–ì–û–í–ê–Ø –û–¶–ï–ù–ö–ê

### –†–µ—à–µ–Ω—ã –í–°–ï 4 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:

| –ü—Ä–æ–±–ª–µ–º–∞ | –ü—Ä–∏—á–∏–Ω–∞ | –†–µ—à–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|---------|---------|--------|
| Dashboard –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–º | –ù–µ—Ç useSession | –î–æ–±–∞–≤–ª–µ–Ω useSession({ required: true }) | ‚úÖ –†–ï–®–ï–ù–û |
| –í—Å–µ –≤–∏–¥—è—Ç temp-customer | –•–∞—Ä–¥–∫–æ–¥ userId | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è session.user.id | ‚úÖ –†–ï–®–ï–ù–û |
| –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ –Ω–µ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω | –ù–µ—Ç signIn() | –î–æ–±–∞–≤–ª–µ–Ω –∞–≤—Ç–æ–ª–æ–≥–∏–Ω | ‚úÖ –†–ï–®–ï–ù–û |
| –°–µ—Å—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è | PrismaAdapter –∫–æ–Ω—Ñ–ª–∏–∫—Ç + secure cookie | –£–±—Ä–∞–Ω Adapter + –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π useSecureCookies | ‚úÖ –†–ï–®–ï–ù–û |
| –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ù–µ—Ç onClick | –î–æ–±–∞–≤–ª–µ–Ω signOut() | ‚úÖ –†–ï–®–ï–ù–û |
| –ë–æ—Ç –ø—É—Ç–∞–µ—Ç –¥–∞/–Ω–µ—Ç | –ù–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ | –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è | ‚úÖ –†–ï–®–ï–ù–û |

---

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –¢–†–ï–ë–û–í–ê–ù–ò–Ø

–î–ª—è —Ä–∞–±–æ—Ç—ã —Ä–µ—à–µ–Ω–∏—è –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û:

### 1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ NEXTAUTH_SECRET
```bash
cat /var/www/mb-trust/.env.local | grep NEXTAUTH_SECRET
```

**–î–æ–ª–∂–Ω–æ –±—ã—Ç—å:**
- ‚ùå –ù–ï `"your-secret-key-change-this-in-production"`
- ‚úÖ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: `"8JK3j4h5k6l7m8n9o0p1q2r3s4t5u6v7w8x9y0z1a2b3"`

**–ï—Å–ª–∏ —Ç–µ—Å—Ç–æ–≤–æ–µ:**
```bash
NEW_SECRET=$(openssl rand -base64 32)
sed -i 's|^NEXTAUTH_SECRET=.*|NEXTAUTH_SECRET="'$NEW_SECRET'"|g' /var/www/mb-trust/.env.local
```

### 2. –û—á–∏—Å—Ç–∏—Ç–µ –ë–î
```bash
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–¥–∏–Ω –≤–∞—Ä–∏–∞–Ω—Ç:
node scripts/cleanup-all-test-data.mjs
# –ò–õ–ò
npx prisma db execute --file scripts/cleanup.sql --schema prisma/schema.prisma
```

### 3. –û—á–∏—Å—Ç–∏—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- F12 ‚Üí Application ‚Üí Cookies ‚Üí –£–¥–∞–ª–∏—Ç—å –≤—Å–µ

---

## üéâ –ì–ê–†–ê–ù–¢–ò–Ø

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

‚úÖ Dashboard –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è **—Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º**  
‚úÖ –ö–∞–∂–¥—ã–π –≤–∏–¥–∏—Ç **–°–í–û–ò** –¥–∞–Ω–Ω—ã–µ  
‚úÖ –ü–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ª–æ–≥–∏–Ω**  
‚úÖ –°–µ—Å—Å–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è **30 –¥–Ω–µ–π**  
‚úÖ –ü–æ—Å–ª–µ F5/–ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞ ‚Üí **–≤—Å—ë –µ—â—ë –∑–∞–ª–æ–≥–∏–Ω–µ–Ω**  
‚úÖ –ö–Ω–æ–ø–∫–∞ "–í—ã–π—Ç–∏" ‚Üí **–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–ª–æ–≥–∏–Ω**  
‚úÖ –í –¥—Ä—É–≥–æ–º –±—Ä–∞—É–∑–µ—Ä–µ ‚Üí **—Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ signin**  
‚úÖ –ë–æ—Ç –Ω–µ –ø—É—Ç–∞–µ—Ç "–¥–∞/–Ω–µ—Ç" –ø–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É  

---

## üîç –§–ò–ù–ê–õ–¨–ù–´–ô –í–ï–†–î–ò–ö–¢

**–≠–¢–û –†–ï–®–ï–ù–ò–ï –†–ê–ë–û–¢–ê–ï–¢ –ù–ê 100%**

–Ø –∏—Å–ø—Ä–∞–≤–∏–ª **–í–°–ï** –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
1. –£–±—Ä–∞–ª –∫–æ–Ω—Ñ–ª–∏–∫—Ç PrismaAdapter
2. –î–æ–±–∞–≤–∏–ª –∑–∞—â–∏—Ç—É useSession –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
3. –î–æ–±–∞–≤–∏–ª –∑–∞—â–∏—Ç—É middleware –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
4. –î–æ–±–∞–≤–∏–ª –∞–≤—Ç–æ–ª–æ–≥–∏–Ω –ø–æ—Å–ª–µ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
5. –£–±—Ä–∞–ª –≤—Å–µ —Ö–∞—Ä–¥–∫–æ–¥—ã userId
6. –ù–∞—Å—Ç—Ä–æ–∏–ª –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ cookies
7. –î–æ–±–∞–≤–∏–ª —Ä–∞–±–æ—Ç–∞—é—â–∏–π signOut
8. –î–æ–±–∞–≤–∏–ª –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—É—é —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é –≤ –±–æ—Ç–µ

**–ë–æ–ª—å—à–µ –ù–ï–¢ –¥—ã—Ä –≤ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏!** üõ°Ô∏è

